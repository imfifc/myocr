import unittest

from .labels import ShippingBill
from .core import fastText_classifier


class TestFastTextClassifier(unittest.TestCase):
    air_waybill_text = """sin 618 6870 3736 p sin   1698 223 shippers name and address shippers account number not negotiable s客 i connexion asia pte ltd air waybill eniter thee agility no 3 ang mo kio street 62 agility intl logistics pte ltd issued by #01 57 link at amk 70 alps avenue #03 04 singapore singapore 498801 co reg no: 199400396c 569139 sg coples 1, 2 and 3ofthishouseairwaybillareorginalsandhavethesamevalidity ustleetea, consignees account number  ar  consignees name and address itis agreed thatthegoodsdescrbedherelnareacceptednapparentgoododerendcondition except as                  s n s e          se wae noted  forcamage subject totheconditonsofcontractonthereversehereof,al celestica  thailand  limited h  g       n    goods may be carried by any other meansincludingroadorany other carrier 49 18 moo 5,laemchabang industrial unless specific contrary instructions aregvenherenby theshpper, and shipper agrees thattheshipmentmay becarredviantermedatestoppingplaces estate,tungsukhla,sriracha which the carrier deemsappropriatetheshippersattention isdrawnto the chonburi notice concerning carrierslimitation oflhltyshppermayincreasesuchlmitation of 20230 th ilbaility bydeclarng ahighervalueforcarageandpayingasupplementalchagelfrequred issuing carrters agent name and city accounting information agents ref aer84129s4 agility intl logistics pte ltd airport to airport 70 alps avenue #03 04 singapore 498801 agents iata code account no  32 3 2969 0002 alport of depature  addroffirst canterj and requested routing reference number optional shipping information singapore sin bkk to routing and destinalion to by to by first crrier by cunrency chi  wt val   other doclared value for carriage declared value for customs  code bkk usd 96 cou pd x  agility nvd ncv   flighidato for agents use only  flighydate amount of insurance airport of destination insurance   f forwarder offrs insurance,and such insurance is k  aee s      sq972 11  mee  nowg requested in accordance with the conditions onreverss hereof, indicate bangkok jl xxxxxxxxxx amountto beinsured infiguresinboxmarkedamountofinsurance, we    e  handling information inv no:inv 191654 sci 1 carton s  th no, of rate class att r    chup kg gross chargeable nature and quantity of goods rcces total welght commodity welght  inci, dimensions or volumey  tem no     l 3 ok m 3 0 as arranged electronic component 037 020 l @ 024 3 0  vol kg slac 1 1 3 0 collect       prepaid 人 weight charge other charges as arranged valuation charge   tax tolal other charges due agent shipper certifies thatthe particularsonthefacehereofarecorrectandthatinsofarsanypatoftheconsignment contains dangerous goods such partis properly descrbedbynameadsnproperconditionforcardagebyairaccordingtothe international afr transport associations dangerous goods rogulations total other charges due to carrier dhinesh mogan              ,   :        "       ae            s    a      h           signature of shipper or his agent    a      :   tolal propaid total collect  e as arranged 10 jun 2019 singapore co charges in dast, currency  currency conversion rotes        : :                           sr     tuat hecte          executed on  date  at  placa  signature of issuing carrier or its agent  : t                   charges at dostination total collect charges  :  ': l  :   e rta cpien teealy                sin   1698 223     at destination      , “        important: all business handled by agilityissubjecttoagility's trading terms and conditions which containlimitationsofliability  copies of these applicableterms and conditionsareavailableuponwritten request  lsgsin010sin 1698223 001"""
    air_packing_list_text2 = """s emerson asja pacific privata limited no  1 pandan croscent packing slip singapore 128461 emerson singapore gst no:m2 0007012 7 03 jun 2019 co  reg  no : 196500174m pan no: aacce2437n  ship from: sales order no: shipment nor           emerson asia pacific private limited 31156534 s9967788 no  1 pandan crescent ship dater delivery id: singapore 128461 30 ma y 2019 s9967788 singapore rep order no: project no: mmomy customer po: inquirles to: 4182035447 service request nor order managert asistin, katherine mae rep customer nox    p order po line qty oty line no no description shipped ordered unitl tag s  serialii s  country of origin name  : 1 19sipg3655822 singapore unit weight 4540 kg710009lb,  totalweight4540kg710009lb handled by hua zhou +6567708794 2 of 2          tee   """
    air_invoice_text = """commercial invoice page 41  of  47 己 abbott ibbott laboratories  singapore  private limite 3 fraser street #23 28 duo tower singapore  189352 sg shipper ein ultimate consignee abbott laboratories  singapore  private limited 50003722 3 fraser street #23 28 abbott gmbh & co kg duo tower max planck ring 2 singapore, 189352 sg wiesbaden, de 65205 de sold to ic1106 shipment no  sin1694462 abbott gmbh and co kg max planck ring 2 air ultimate mot wiesbaden  delkenheim, de 65205 de payment terms fca incoterms origin state ctry code delivery no   19217846 po no   4600346481 sales order no   81616 invoice no    81616 19217846 invoice date  jun 06 2019 line no  description hts   schb lot   serial no  unit of shpped unit price extended measure size price usd 1 part no  a 35002316 02 85414090 h552934 1 14 00 82 64 1,156 96 coo cn   eccn   ear99 lic no      nlr part desc    dispersion home sensor kit, adjustable 2 part no  a 35002316 02 85414090 h552934 1 1 00 82 64 82 64 coo cn   eccn   ear99 lic no      nlr part desc    dispersion home sensor kit, adjustable invoice tota 1,239 60   c """
    air_packing_list_text = """b    packing    list wellhead solutions co , ltd   hte lieal 888 zhonorlang rd, maogang town pl19394 no : songilang districl, shanghal 201607, china rev: 01 tel +86 21 5786 8788, fax +85 21 5785 6958 23 may 19 date: website  hip ilwwwtwelheadsolutions com tax id  3102 2768 4095 265 ship to: pt valco gray indonesis jalan kerapu no 14 & 15 industial see bati amparfulau balam, 20432indonasia ele  与国 等国速国 iae fig t  e landing sub, ms 800, assembly, 16 in ,, below mudline, 4130 95ksi, 22 x 1 00 wp top, 22 x 1 00 wp bottom 71 x x x 756 ea 722 126 weight: 156b lbs  0001 ws19840 h58714 1 2022b7 01 02 dimensions:  a  wall top  = 1 015  = 22 03  b  od top  c  wall bottom  = landing sub, ms 800, assembly, 16 in , below mudline, 4130 s5ks1, 22 x 1 00 wp top, 22 x 1 00 wp bottom 71 x 67 x ts6 x ea 722 126 weight; 1568 lbs 1 h58714 1 0002 ws19841 202287 02 02 dimensions:  a  wall top  = 1 015  b  od top  =  22 03  c  wall bottom    we hereby declarethattheabovedetalisandstatementsarecorect,thatallthegoodswereproducedinthepeoplesrepublcotchina and they comply withtherulesoforiginofthepeoplesrepublicofchina madenchina  shipping mark wellheao solutions co ,ltd shippers consigneo   pt velco gray indonesia deiverto  jalankerapuno14& 15industial seebaluamparpuaubatam,29432ndnesia pon: pow: pkg no  products: pr: qty : nat wt ozaal c3 gross wt ulmension authorized signature made in china qa release: date: 2017 9 7 wesco jl2712 05 rbv 04"""

    def test_shipping(self):
        ret = fastText_classifier.run_shipping_bill(
            [
                self.air_waybill_text,
                self.air_invoice_text,
                self.air_packing_list_text,
                self.air_packing_list_text2,
            ]
        )
        self.assertEqual(ret[0][0], ShippingBill.AIR_WAYBILL)
        self.assertEqual(ret[1][0], ShippingBill.AIR_INVOICE)
        self.assertEqual(ret[2][0], ShippingBill.AIR_PACKING_LIST)
        self.assertEqual(ret[3][0], ShippingBill.AIR_PACKING_LIST)


if __name__ == "__main__":
    unittest.main()
